import math

COM_PORT = "COM17"
SERIAL_BAUD = 2_000_000  # Waveshare default serial baud
CAN_BITRATE_CODE = 0x01  # 1 Mbps
NODE_ID = 1

# CANopen COB-IDs
COB_NMT = 0x000
COB_SDO_RX_BASE = 0x600
COB_RPDO1_BASE = 0x200
COB_RPDO2_BASE = 0x300
COB_RPDO3_BASE = 0x400
COB_RPDO4_BASE = 0x500
COB_TPDO1_BASE = 0x180

# CiA402 Controlword
CW_SHUTDOWN = 0x0006
CW_SWITCH_ON = 0x0007
CW_ENABLE_OPERATION = 0x000F
CW_DISABLE_VOLTAGE = 0x0000

# Modes of Operation
MODE_POSITION = 1
MODE_TORQUE = 4
MODE_VELOCITY = 3

# Profile defaults
PROFILE_ACCEL_DEFAULT = 1000000
PROFILE_DECEL_DEFAULT = 1000000
QUICK_STOP_DECEL_DEFAULT = 30000000
MAX_PROFILE_VELOCITY_DEFAULT = 800000

# Scaling/constants
RPM_TO_RAW = 10000 / 60
INC_PER_REV = 10000
SHAFT_RADIUS_CM = 4.0
GEAR_RATIO = 3.28  # motor revs per shaft rev
CM_PER_SHAFT_REV = 2 * math.pi * SHAFT_RADIUS_CM
RATED_TORQUE_NM = 2.4
RATED_CURRENT_A = 4.5
CURRENT_ACTUAL_PCT_PER_LSB = 0.1
TORQUE_PCT_PER_LSB = 0.1

# Timer intervals (ms)
CONTROL_INTERVAL_MS = 10  # Control layer cycle time
POLL_INTERVAL_MS = 5      # Drive controller polling cycle time
TX_INTERVAL_MS = 10       # Drive controller transmit cycle time

# Watchdog
WATCHDOG_ENABLED = True

# Synthetic application-level error codes
COMM_TIMEOUT_ERROR_CODE = 0x08000000
